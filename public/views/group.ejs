<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title><%= title %></title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<link rel="icon" href="../assets-home/home/finfine.png" type="image/gif">
	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<link href="../assets/css/transparent/app.min.css" rel="stylesheet" />
	<!-- ================== END BASE CSS STYLE ================== -->
	
	<!-- ================== BEGIN PAGE CSS STYLE ================== -->
	<link href="../assets/plugins/countdown/jquery.countdown.css" rel="stylesheet" />
	<!-- ================== END PAGE CSS STYLE ================== -->
</head>
<body>
	<%- include("../frame/loader") -%>

	<!-- begin #page-container -->
	<div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
		<%- include("../frame/header") -%>
		<%- include("../frame/sidebar") -%>
		
        <!-- begin #content -->
		<div id="content" class="content">
			<!-- begin breadcrumb -->
			<ol class="breadcrumb float-xl-right">
				<li class="breadcrumb-item"><a href="javascript:;">Comunity</a></li>
				<li class="breadcrumb-item active">Group</li>
			</ol>
			<!-- end breadcrumb -->
			<!-- begin page-header -->
			<h1 class="page-header">Group</small></h1>
			<!-- end page-header -->

			<% if( listGroup != null){ %>
			<!-- didn't join a group ,yet -->
			<div class="row" id="join_group">
				<!-- begin col-10 -->
				<div class="col-xl-12">
					<div class="panel panel-inverse">
						<h4 class="p-10">JOIN A GROUP</h4>
						<!-- begin panel-body -->
						<div class="panel-body">
							<table id="new_group_tb" class="table table-striped table-bordered table-td-valign-middle text-center">
								<thead>
									<tr>
										<th width="1%"></th>
										<th class="text-nowrap">ID</th>
										<th class="text-nowrap">Name</th>
										<th class="text-nowrap">Members</th>
										<th class="text-nowrap">Offline</th>
										<th class="text-nowrap">Leader</th>
										<th class="text-nowrap">Join</th>
									</tr>
								</thead>
								<tbody>
									<% listGroup.forEach(function(item){ %>
										<tr class="odd gradeX" id="tr-currency.symbol">
											<td width="1%" class="f-s-600 text-inverse">1</td>
											<td><%= item.code %></td>
											<td><%= item.name %></td>
											<td><%= item.members %></td>
											<td><%= item.offline %></td>
											<td><%= item.leader %></td>
											<td><input type="button" class="btn_join_group btn btn-success" value="Join" data-group="<%= item.code %>"></td><!-- add id group here-->
										</tr>
									<% }) %>
								</tbody>
							</table>
							
						</div>
						<!-- end panel-body -->
					</div>
				</div>
				<!-- end col-10 -->
			</div>
			<% }else{ %>
			<!-- joined a group -->
			<div class="row" id="info_group">
				<!-- begin col-6 -->
				<div class="col-xl-9 col-lg-9">
					<!-- begin card -->
					<div class="card border-0 mb-3 overflow-hidden " style="min-height: 150px;">
						<!-- begin card-body -->
						<div class="card-body">
							<!-- begin row -->
							<div class="mb-3 text-greyn text-center">
								<b>GROUP INFORMATION</b>
							</div>
							<div class="row">
								<!-- begin col-7 -->
								
								<div class="col-xl-4 col-lg-4">
									<div class="d-flex">
										<h5 class="f-s-14 text-gray">Group Id: &nbsp;&nbsp;&nbsp;<span class="text-grey"><%= listMem.team.code %></span></h5>
									</div>
									<div class="d-flex">
										<h5 class="f-s-14 text-gray">Name: &nbsp;&nbsp;&nbsp;<span class="text-grey">Tulpo</span> &nbsp;&nbsp;&nbsp;<input id="edit_name_group" type="button" class="btn btn-xs btn-outline-grey d-none"value="Edit Name" data-toggle="modal" data-target="#edit_name_group_md"></h5>
									</div>
									<div class="d-flex">
										<h5 class="f-s-14 text-gray">Members: &nbsp;&nbsp;&nbsp;<span class="text-grey"><%= listMem.team.members %></span></h5>
									</div>
								</div>
								<div class="col-xl-4 col-lg-4">
									<div class="d-flex">
										<h5 class="f-s-14 text-gray">Group Link: &nbsp;&nbsp;&nbsp;<span class="text-grey"><%= listMem.team.chat %></span></h5>
									</div>
									<div class="d-flex">
										<h5 class="f-s-14 text-gray">Zoom Room: &nbsp;&nbsp;&nbsp;<span class="text-grey"><%= listMem.team.meeting %></span></h5>
									</div>
								</div>
								<div class="col-xl-4 col-lg-4">
									<div class="d-flex">
										<h5 class="f-s-14 text-gray">Area: &nbsp;&nbsp;&nbsp;<span class="text-grey"><%= listMem.team.local %></span></h5>
									</div>
									<div class="d-flex">
										<h5 class="f-s-14 text-gray">Offline Location: &nbsp;&nbsp;&nbsp;<span class="text-grey"><%= listMem.team.offline %></span> &nbsp;&nbsp;&nbsp;<input id="edit_location_group" type="button" class="btn btn-xs btn-outline-grey d-none"value="Edit Offline Location" data-toggle="modal" data-target="#edit_location_group_md"></h5>
									</div>
									<div class="d-flex">
									<h5 class="f-s-14 text-gray">Offline Time: &nbsp;&nbsp;&nbsp;<span class="text-grey"><%= listMem.team.time.toISOString().split("T")[0] + " " + listMem.team.time.toISOString().split("T")[1].slice(0,8) %></span> &nbsp;&nbsp;&nbsp;<input id="edit_time_group" type="button" class="btn btn-xs btn-outline-grey d-none"value="Edit Offline Times" data-toggle="modal" data-target="#edit_time_group_md"></h5>
									</div>

								</div>
								<!-- end col-7 -->
							</div>
							<!-- end row -->
						</div>
						<!-- end card-body -->
					</div>
					<!-- end card -->
				</div>
				<!-- end col-6 -->
				<!-- begin col-6 -->
				<div class="col-xl-3 col-lg-3">
					<!-- begin card -->
					<div class="card border-0 mb-3 overflow-hidden " style="min-height: 150px;">
						<!-- begin card-body -->
						<div class="card-body">
							<!-- begin row -->
							<div class="row">
								<!-- begin col-7 -->
								<div class="col-xl-12 col-lg-12">
									<!-- begin title -->
									<div class="mb-3 text-grey text-center">
										<b>TOTAL SALES</b>
									</div>
									<!-- end title -->
									<!-- begin title -->
									<div class="mb-3 text-grey text-center">
										<h2><span><%= listMem.salesGroup %></span> $</h2>
									</div>
									<!-- end title -->
								</div>
								<!-- end col-7 -->
							</div>
							<!-- end row -->
						</div>
						<!-- end card-body -->
					</div>
					<!-- end card -->
				</div>
				<!-- end col-6 -->
			</div>
			<div class="row" id="mem_list" data-gid="<%= listMem.team.code %>">
				<!-- begin col-10 -->
				<div class="col-xl-12">
					<div class="panel panel-inverse">
						<h4 class="p-10">MEMBERS</h4>
						<!-- begin panel-body -->
						<div class="panel-body">
							<table id="member_group_tb" class="table table-striped table-bordered table-td-valign-middle text-center">
								<thead>
									<tr>
										<th width="1%"></th>
										<th class="text-nowrap">Id</th>
										<th class="text-nowrap">Name</th>
										<th class="text-nowrap">Email</th>
										<th class="text-nowrap">Phone</th>
										<th class="text-nowrap">Job</th>
										<!-- if(role = leader){ -->
										<th class="text-nowrap">Action</th>
										<!-- } -->
									</tr>
								</thead>
								<tbody>
									<% listMem.mem.forEach(function(item){ %>
										<tr class="odd gradeX" id="r_<%= item.id %>">
											<td width="1%" class="f-s-600 text-inverse">1</td>
											<td><%= item.id %></td>
											<td><%= item.info.first_name %> <%= item.info.last_name %></td>
											<td><%= item.info.email %></td>
											<td><%= item.info.phone %></td>
											<td><%= item.info.job %></td>
											<!-- if(role == "leader"){ -->
											<td><input type="button" class="btn_remove_mem btn btn-danger" value="Delete" data-id="<%= item.id %>"></td><!-- add id member here-->
											<!-- } -->
										</tr>
									<% }) %>
								</tbody>
							</table>
							
						</div>
						<!-- end panel-body -->
					</div>
				</div>
				<!-- end col-10 -->
			</div>
			
			<% if(role=="leader" || role=="admin"){ %>
			<input id="edit_group" type="button" class="btn btn-outline-success" value="Edit Group">
			<input id="cancel_edit_group" type="button" class="btn btn-outline-danger d-none" value="Cancel">
			<% }} %>
		</div>
		<!-- end #content -->
		<% if(role=="leader" || role=="admin"){ %>
		<!-- Modal name-->
		<div class="modal fade" id="edit_name_group_md" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Edit Group's Name</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
					</div>
					<div class="modal-body">
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label">Name :</label>
							<div class="col-md-8 col-sm-8">
								<span>
									<input class="form-control" type="text" id="update_name_group_val" placeholder="Enter Your Name"/>
								</span>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						<button id="btn_submit_name_group" data-group="<%= listMem.team.code %>" type="button" class="btn btn-primary">Submit</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal location-->
		<div class="modal fade" id="edit_location_group_md" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Edit Group's Offline Location</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
					</div>
					<div class="modal-body">
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label">Offline Location :</label>
							<div class="col-md-8 col-sm-8">
								<span>
									<input class="form-control" type="text" id="update_location_group_val" placeholder="Enter Your Offline Location"/>
								</span>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						<button id="btn_submit_location_group" data-group="<%= listMem.team.code %>" type="button" class="btn btn-primary">Submit</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal time-->
		<div class="modal fade" id="edit_time_group_md" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Edit Group's Time Offline</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
					</div>
					<div class="modal-body">
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label">Offline Time :</label>
							<div class="col-md-8 col-sm-8">
								<span>
									<input class="form-control" type="text" id="update_time_group_val" placeholder="Example 02/20/2010 20:20:20"/>
								</span>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
						<button id="btn_submit_time_group" data-group="<%= listMem.team.code %>" type="button" class="btn btn-primary">Submit</button>
					</div>
				</div>
			</div>
		</div>
		<% } %>
		<!-- begin scroll to top btn -->
		<a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
		<!-- end scroll to top btn -->
	</div>
	<!-- end page container -->
	
	<!-- ================== BEGIN BASE JS ================== -->
	<script src="../assets/js/app.min.js"></script>
	<script src="../assets/js/theme/transparent.min.js"></script>
	<!-- ================== END BASE JS ================== -->
	
	<!-- ================== BEGIN PAGE LEVEL JS ================== -->
	<script src="../assets/plugins/datatables.net/js/jquery.dataTables.min.js"></script>
	<script src="../assets/plugins/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
	<script src="../assets/plugins/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
	<script src="../assets/plugins/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="../custom/notify.min.js"></script>
	<script src="../custom/group.js"></script>
	<script src="../custom/sidebar.js"></script>
	<!-- ================== END PAGE LEVEL JS ================== -->
</body>
</html>